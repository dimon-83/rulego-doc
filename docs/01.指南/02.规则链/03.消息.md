---
title: 消息
article: false
author: 
  name: rulego
  link: https://github.com/rulego/rulego
date: 2023-09-11 18:14:59
permalink: /pages/8ee82f/
---

消息(RuleMsg)是传入规则链的输入和输出消息或者事件，它允许被节点组件转换、过滤和分发。消息在规则链中流转时会携带完整的上下文信息，包含以下字段：

- ***Ts：*** 类型：`int64`，消息产生的时间戳，用于记录消息的生成时间
- ***Id：*** 类型：`string`，消息的唯一标识符。同一条消息在规则引擎流转的整个生命周期中保持不变，用于追踪和关联消息
- ***DataType：*** 类型：`string`，消息数据的格式类型，可选值：
  - JSON：JSON格式数据(默认)，在脚本组件中会自动解析成对象，可直接操作JSON字段
  - TEXT：文本格式数据
  - BINARY：二进制格式数据
- ***Type：*** 类型：`string`，消息类型。规则节点组件可以根据该字段进行消息路由和分发处理
- ***Data：*** 类型：`string`，消息的实际内容/负载数据
- ***Metadata：*** 类型：`map[string]string`，消息的元数据信息，用于存储消息的附加属性和上下文数据

消息在规则链的处理过程中，各个节点可以:
- 对消息进行路由，决定消息流向下一个或多个节点
- 修改和转换消息内容，包括数据内容、类型和格式
- 基于消息内容增强数据，如查询数据库补充信息
- 根据消息执行具体动作，如发送通知、调用API等



